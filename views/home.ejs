<%- include('partials/header') %>


<h2 class="section-title">Our Products</h2>
<!-- üîç Search Bar -->
<form action="/" method="GET" style="text-align:center; margin:20px 0;">
  <input 
    type="text" 
    name="search" 
    value="<%= search || '' %>" 
    placeholder="Search products..." 
    style="width:50%; padding:10px; font-size:16px; border:1px solid #ccc; border-radius:5px;"
  >

  <button 
    type="submit" 
    style="padding:10px 18px; font-size:16px; background:black; color:white; border:none; border-radius:5px; cursor:pointer;">
    üîç Search
  </button>
</form>


<% if (products.length === 0) { %>
  <p style="text-align:center;margin-top:20px;">
    No products yet. <a href="/admin/add-product">Add your first product</a>.
  </p>
<% } else { %>

<div class="product-grid">
  <% products.forEach(p => { %>
    <div class="product-card">
      <div class="product-img-wrapper">
        <% if (p.image) { %>
          <img src="<%= p.image %>" alt="<%= p.name %>">
        <% } else { %>
          <span>No Image</span>
        <% } %>
      </div>

      <div class="product-info">
        <div class="product-name"><%= p.name %></div>
        <div class="product-price">Rs <%= p.price %></div>

        <div class="product-actions">
          <form action="/add-to-cart/<%= p.id %>" method="POST" style="flex:1;">
            <button class="btn btn-primary" style="width:100%;">Add to Cart</button>
          </form>
          <a href="/product/<%= p.id %>" class="btn btn-outline" style="flex:1;">Details</a>
        </div>
      </div>
    </div>
  <% }) %>
</div>

<% } %>

<%- include('partials/footer') %>

